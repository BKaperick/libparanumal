ifndef OCCA_DIR
ERROR:
	@echo "Error, environment variable [OCCA_DIR] is not set"
endif

DEBUG = 1
include ${OCCA_DIR}/scripts/makefile
sPath = src
oPath = obj
compilerFlags += 

#---[ COMPILATION ]-------------------------------
headers = $(wildcard $(iPath)/*.h) $(wildcard $(iPath)/*.tpp)
sources = $(wildcard $(sPath)/*.c)

objects	= obj/mainBoltzmann2D.o\
obj/meshSetup2D.o\
obj/meshBoltzmannSetup2D.o\
obj/meshBoltzmannRun2D.o\
obj/meshBoltzmannSurface2D.o\
obj/meshBoltzmannVolume2D.o\
obj/meshBoltzmannUpdate2D.o\
obj/meshBoltzmannError2D.o\
obj/meshConnect2D.o\
obj/meshConnectBoundary2D.o\
obj/meshConnectFaceNodes2D.o\
obj/meshHaloSetup2D.o\
obj/meshHaloExchange2D.o\
obj/meshHaloExtract2D.o\
obj/meshGeometricFactors2D.o\
obj/meshGeometricPartition2D.o\
obj/meshGradient2D.o\
obj/meshLoadReferenceNodes2D.o\
obj/meshParallelConnect2D.o\
obj/meshParallelPrint2D.o\
obj/meshParallelReader2D.o\
obj/meshPartitionStatistics2D.o\
obj/meshPhysicalNodes2D.o\
obj/meshPrint2D.o\
obj/meshReader2D.o\
obj/meshSurfaceGeometricFactors2D.o\
obj/meshVTU2D.o\
obj/meshPlotVTU2D.o\
obj/occaOptimizeGradient2D.o\
obj/occaTest2D.o\
obj/parallelSort.o\
obj/boltzmannGaussianPulse2D.o\
obj/meshNumberNodes2D.o

main: $(objects) $(headers) 
	$(compiler) $(compilerFlags) -o mainBoltzmann2D $(flags) $(objects) $(paths) $(links)

$(oPath)/%.o:$(sPath)/%.c $(wildcard $(subst $(sPath)/,$(iPath)/,$(<:.c=.h))) $(wildcard $(subst $(sPath)/,$(iPath)/,$(<:.c=.tpp)))
	$(compiler) $(compilerFlags) -o $@ $(flags) -c $(paths) $<

clean:
	rm -f $(oPath)/*;
	rm -f main
#=================================================
